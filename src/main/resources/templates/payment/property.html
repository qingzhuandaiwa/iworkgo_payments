<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<title>物业费缴纳</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no" />
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<link rel="stylesheet" href="${ctx.contextPath}/static/css/cui.css" />
	<link rel="stylesheet" href="${ctx.contextPath}/static/css/lib.css" />
	<link rel="stylesheet" href="${ctx.contextPath}/static/css/slick.css" />
	<link rel="stylesheet" href="${ctx.contextPath}/static/css/style.css" />

    <link rel="stylesheet" href="${ctx.contextPath}/static/css/mescroll.min.css" />

    <script src="${ctx.contextPath}/static/js/jquery.min.js"></script>
    <script src="${ctx.contextPath}/static/js/lib.js"></script>
    <script src="${ctx.contextPath}/static/js/mescroll.min.js"></script>
    <script src="${ctx.contextPath}/static/layer/layer.js"></script>



</head>
<body>
    
    <!-- 头部 -->
	
    <!-- 头部 end-->
    
    <!-- 主内容 -->
    <div class="main">
        <ul class="ul-q1 TAB_CLICK" id=".tab01">
            <li class="on"><a href="javascript:;">本期待缴账单</a></li>
            <li><a href="javascript:;">逾期未缴账单</a></li>
            <li><a href="javascript:;">缴费记录</a></li>
        </ul>
        <p>${appSecret!}</p>
        <div class="tab01 mescroll"    id="mescroll" >
            <ul class="ul-q2 bq">
                <!--<li>-->
                    <!--<div class="top">-->
                        <!--<h3>创意中央 1栋 301</h3>-->
                    <!--</div>-->
                    <!--<div class="txt">-->
                        <!--<span style="width: max-content"><em>￥</em>15000</span><i class="i1">未缴纳</i>-->
                    <!--</div>-->
                    <!--<p>2018.01.01-2018.12.31</p>-->
                <!--</li>-->
            </ul>

        </div>
        <div class="tab01 dn">
            <ul class="ul-q2">
                <li>
                    <div class="top">
                        <h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i2">含滞纳金50元</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
                <li>
                    <div class="top">
                        <h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i2">含滞纳金50元</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
                <li>
                    <div class="top">
                        <h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i2">含滞纳金50元</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
                <li>
                    <div class="top">
                        <h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i2">含滞纳金50元</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
            </ul>
        </div>
        <div class="tab01 dn">
            <ul class="ul-q2">
                <li>
                    <div class="top">
                       <span>2018.01.01</span><h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i2">含滞纳金50元</i><i class="i3">结清</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
                <li>
                    <div class="top">
                       <span>2018.01.01</span><h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i3">结清</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
                <li>
                    <div class="top">
                       <span>2018.01.01</span><h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i2">含滞纳金50元</i><i class="i3">结清</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
                <li>
                    <div class="top">
                       <span>2018.01.01</span><h3>创意中央 1栋 301</h3>
                    </div>
                    <div class="txt">
                        <span><em>￥</em>15050</span>
                        <i class="i2">含滞纳金50元</i><i class="i3">结清</i>
                    </div>
                    <p>2018.01.01-2018.12.31</p>
                </li>
            </ul>
        </div>
    </div>
    <!-- 主内容 end-->


    <script type="text/javascript">
        $(function(){
            //创建MeScroll对象
            var mescroll = new MeScroll("mescroll", {
                down: {
                    auto: false, //是否在初始化完毕之后自动执行下拉回调callback; 默认true
                    callback: downCallback //下拉刷新的回调
                },
                up: {
                    auto: true, //是否在初始化时以上拉加载的方式自动加载第一页数据; 默认false
                    isBounce: false, //此处禁止ios回弹,解析(务必认真阅读,特别是最后一点): http://www.mescroll.com/qa.html#q10
                    callback: upCallback, //上拉回调,此处可简写; 相当于 callback: function (page) { upCallback(page); }
                    toTop:{ //配置回到顶部按钮
                        src : "../res/img/mescroll-totop.png", //默认滚动到1000px显示,可配置offset修改
                        //offset : 1000
                    }
                }
            });

            /*下拉刷新的回调 */
            function downCallback(){
                //联网加载数据
                getListDataFromNet(0, 1, function(data){
                    //联网成功的回调,隐藏下拉刷新的状态
                    mescroll.endSuccess();
                    //设置列表数据
                    setListData(data, false);
                }, function(){
                    //联网失败的回调,隐藏下拉刷新的状态
                    mescroll.endErr();
                });
            }

            /*上拉加载的回调 page = {num:1, size:10}; num:当前页 从1开始, size:每页数据条数 */
            function upCallback(page){
                //联网加载数据
                getListDataFromNet(page.num, page.size, function(curPageData){
                    //联网成功的回调,隐藏下拉刷新和上拉加载的状态;
                    //mescroll会根据传的参数,自动判断列表如果无任何数据,则提示空;列表无下一页数据,则提示无更多数据;
                    console.log("page.num="+page.num+", page.size="+page.size+", curPageData.length="+curPageData.rows);

                    //方法一(推荐): 后台接口有返回列表的总页数 totalPage
                    mescroll.endByPage(curPageData.rows.length, curPageData.total); //必传参数(当前页的数据个数, 总页数)

                    //方法二(推荐): 后台接口有返回列表的总数据量 totalSize
                    //mescroll.endBySize(curPageData.length, totalSize); //必传参数(当前页的数据个数, 总数据量)

                    //方法三(推荐): 您有其他方式知道是否有下一页 hasNext
                    //mescroll.endSuccess(curPageData.length, hasNext); //必传参数(当前页的数据个数, 是否有下一页true/false)

                    //方法四 (不推荐),会存在一个小问题:比如列表共有20条数据,每页加载10条,共2页.如果只根据当前页的数据个数判断,则需翻到第三页才会知道无更多数据,如果传了hasNext,则翻到第二页即可显示无更多数据.
                    // mescroll.endSuccess(curPageData.length);

                    //提示:curPageData.length必传的原因:
                    // 1.判断是否有下一页的首要依据: 当传的值小于page.size时,则一定会认为无更多数据.
                    // 2.比传入的totalPage, totalSize, hasNext具有更高的判断优先级
                    // 3.使配置的noMoreSize生效

                    //设置列表数据
                    setListData(curPageData.rows, true);
                }, function(){
                    //联网失败的回调,隐藏下拉刷新和上拉加载的状态;
                    mescroll.endErr();
                });
            }

            /*设置列表数据*/
            function setListData(rows, isAppend) {
                // var listDom=document.getElementById("newsList");
                var listDom=document.getElementsByClassName("ul-q2 bq")[0];

                for (var i = 0; i < rows.length; i++) {
                    var newObj=rows[i];

                    // var str='<p>'+newObj.title+'</p>';
                    // str+='<p class="new-content">'+newObj.content+'</p>';
                    var str = '<div class="top">' + '<h3>' + newObj.buildingName + ' ' + newObj.roomNumber + '</h3></div>';
                    str+='<div class="txt">' + '<span><em>￥</em>' + newObj.primeAmount + '</span><i class="i1">未缴纳</i></div>'
                    str+='<p>'+ newObj.startDate + ' - ' + newObj.endDate + '</p>';

                    var liDom=document.createElement("li");
                    liDom.innerHTML=str;

                    if (isAppend) {
                        listDom.appendChild(liDom);//加在列表的后面,上拉加载
                    } else{
                        listDom.insertBefore(liDom, listDom.firstChild);//加在列表的前面,下拉刷新
                    }
                }
            }

            /*联网加载列表数据
             在您的实际项目中,请参考官方写法: http://www.mescroll.com/api.html#tagUpCallback
             请忽略getListDataFromNet的逻辑,这里仅仅是在本地模拟分页数据,本地演示用
             实际项目以您服务器接口返回的数据为准,无需本地处理分页.
             * */
            var downIndex=0;
            function getListDataFromNet(pageNum,pageSize,successCallback,errorCallback) {
                //延时一秒,模拟联网
                setTimeout(function () {
                    try{
                        // var newArr=[];
                        // if(pageNum==0){
                        //     //此处模拟下拉刷新返回的数据
                        //     downIndex++;
                        //     var newObj={title:"【新增新闻"+downIndex+"】 新增新闻的标题", content:"新增新闻的内容"};
                        //     newArr.push(newObj);
                        // }else{
                        //     //此处模拟上拉加载返回的数据
                        //     for (var i = 0; i < pageSize; i++) {
                        //         var upIndex=(pageNum-1)*pageSize+i+1;
                        //         var newObj={title:"【新闻"+upIndex+"】 标题标题标题标题标题标题", content:"内容内容内容内容内容内容内容内容内容内容"};
                        //         newArr.push(newObj);
                        //     }
                        // }
                        $.ajax({
                            type: "post",
                            url: "/payment/bill/listPage",
                            data: {
                                "pageFrom": pageNum,
                                "pageSize": pageSize
                            },
                            dataType: "JSON",
                            success: function(result) {
                                // var hotline = data.hotline.split(',');
                                // var ul = document.body.querySelector('#complaintsHotline');
                                // var span1 = document.createElement('span');
                                // span1.className = 's1';
                                // span1.innerHTML =	"<a href='javascript:phonecall(&apos;"+hotline[0]+"&apos;)'>"+hotline[0]+"</a>";
                                // ul.appendChild(span1);
                                //
                                // var span2 = document.createElement('span');
                                // span2.className = 's2';
                                // span2.innerHTML =	"<a href='javascript:phonecall(&apos;"+hotline[1]+"&apos;)'>"+hotline[1]+"</a>";
                                // ul.appendChild(span2);
                                // $("")
                                console.log(result);
                                // alert("success");
                                if (result.code !== 200){
                                    alert(result.message);
                                    return;
                                }

                                //联网成功的回调
                                successCallback&&successCallback(result.data);
                            }
                        })

                    }catch(e){
                        //联网失败的回调
                        errorCallback&&errorCallback();
                    }
                },1000)
            }

        });

    </script>
    <!-- 底部 -->

	
</body>
</html>